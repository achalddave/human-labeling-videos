<!DOCTYPE html>
<head>
<script type='text/javascript' src='http://code.jquery.com/jquery-3.3.1.min.js'></script>
<script type='text/javascript' src='static/index.js'></script>
<script type='text/javascript' src='static/single_image_with_captions.js'></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel='stylesheet' href='/static/index.css'>
<link rel='stylesheet' href='/static/single_image.css'>
<style type='text/css'>
.to-label-image-container {
  height: 100%;
  min-height: 100px;
}

.to-label-container {
  display: flex;
  flex-direction: column;
}
</style>
</head>
<body>
  <div id='progress'>
      Images left: {{num_left_images}}/{{num_total_images}}
      ({{percent_complete}}% complete)
  </div>
  <form method='Post' action='/submit'>
  {% for (data_key, image_path, current_label, caption) in images_to_label %}
  <div class='data-label-container' id='{{data_key}}'>
    <div class='to-label-container'>
      <div class='to-label-image-container'>
        <img class='to-label' src={{image_path}}></img>
      </div>
      <div class='to-label-image-caption'>
        {{caption}}
      </div>
    </div>
    <div tabindex='0' class='labels'>
      {% for label_id, name, desc_short, desc_long, key, color in labels %}
      <input name='{{data_key}}__{{label_id}}'
             class='keyboard-{{key}}'
             {% if current_label is not none and label_id in current_label[0] %}
                 checked
             {% endif %}
             id='{{data_key}}__{{label_id}}-id' type='checkbox'>
      <label title='{{desc_long}}' class='label-button label-button-{{color}}'
             for='{{data_key}}__{{label_id}}-id'>
        {{desc_short}}
      </label>
      {% endfor %}
      <input class='notes' name='{{data_key}}__notes'
             id='{{data_key}}__notes-id'
             type='text'
             {% if current_label is not none and current_label[1] != '' %}
             value='{{current_label[1]}}'
             {% else %}
             placeholder='notes'
             {% endif %}
             />
    </div>
  </div>
  {% endfor %}
  <div id='error'></div>
  <input class='btn btn-outline-primary btn-lg' id='submit-button' type='submit' value='Submit' />
  </form>
  <img id='preview'></img>
</body>
</html>
